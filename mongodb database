const MongoClient = require('mongodb').MongoClient;
const fs = require('fs');

// Connection URL
const url = 'mongodb://localhost:27017';

// Database Name
const dbName = 'mydatabase';

// Collection Name
const collectionName = 'transcriptions';

// Read the transcription text file
const transcript = fs.readFileSync('transcription.txt', 'utf8');

// Create a new transcription document
const transcriptionDoc = {
    transcriptText: transcript,
    langchainMetadata: {},
    pineconeMetadata: {},
    openaiMetadata: {},
};

// Connect to MongoDB and insert the transcription document into the collection
MongoClient.connect(url, function(err, client) {
  console.log("Connected successfully to server");

  const db = client.db(dbName);

  db.collection(collectionName).insertOne(transcriptionDoc, function(err, result) {
    console.log("Inserted transcription document into the collection");

    // Close the MongoDB client
    client.close();
  });
});
